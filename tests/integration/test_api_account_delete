import requests
import pytest

class TestAPIAccountDelete:
    def test_successful_delete_account(self, request_data, API_base_url):
        create_response = requests.post(f"{API_base_url}/accounts", json=request_data)
        assert create_response.status_code == 201

        delete_response = requests.delete(f"{API_base_url}/accounts/{request_data['pesel']}")
        assert delete_response.status_code == 200
        data = delete_response.json()
        assert data["message"] == "Account deleted"

        get_response = requests.get(f"{API_base_url}/accounts/{request_data['pesel']}")
        assert get_response.status_code == 404
        data = get_response.json()
        assert data["error"] == "Account not found"
       